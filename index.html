<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
    <title>Glamora | Login & Registration</title>
    <script>
        (function (e, t, n, o) {
            e.PeopleEventsObject = o;
            e[o] = e[o] || {
                init: function (t) { e[o].apiKey = t; },
                setPerson: function (t, n) { e[o].person = t; e[o].personTtl = n; },
                forgetPerson: function () { e[o].toForgetPerson = true; },
                track: function () { (e[o].q = e[o].q || []).push(arguments); },
                updatePerson: function (t) { e[o].personToUpdate = { person: t }; },
            };
            var r = t.createElement("script");
            var s = t.getElementsByTagName("script")[0];
            r.async = 1;
            r.src = n;
            s.parentNode.insertBefore(r, s);
        })(window, document, "https://s3.eu-central-1.amazonaws.com/portal-cdn-production/people-events-sdk/pe.latest-2.js", "pe");

        pe.init("8dbf14630365928c5cdd672534a9f29a-0a769b9b-dc7d-453e-b98d-8feb964a1bb6");
    </script>
</head>
<body>
    <div class="wrapper">
        <div class="form-box">
            <div class="login-container" id="login">
                <header>Login</header>
                <div class="input-box">
                    <input type="text" id="login-email" class="input-field" placeholder="Email">
                </div>
                <div class="input-box">
                    <input type="password" id="login-password" class="input-field" placeholder="Password">
                </div>
                <div class="input-box">
                    <input type="submit" class="submit" value="Sign In" onclick="handleLogin()">
                </div>
            </div>
            <div class="register-container" id="register">
                <header>Sign Up</header>
                <div class="input-box">
                    <input type="text" id="register-firstname" class="input-field" placeholder="Firstname">
                </div>
                <div class="input-box">
                    <input type="email" id="register-email" class="input-field" placeholder="Email">
                </div>
                <div class="input-box">
                    <input type="password" id="register-password" class="input-field" placeholder="Password">
                </div>
                <div class="input-box">
                    <input type="submit" class="submit" value="Register" onclick="handleRegistration()">
                </div>
            </div>
        </div>
    </div>
    <script>
        function validateEmail(email) {
            const re = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            return re.test(email);
        }

        function validatePassword(password) {
            return password.length >= 6 && /[A-Z]/.test(password) && /[0-9]/.test(password);
        }

        async function handleRegistration() {
            const firstName = document.getElementById("register-firstname").value;
            const email = document.getElementById("register-email").value;
            const password = document.getElementById("register-password").value;

            if (!firstName || !email || !password) {
                alert("Please fill out all fields.");
                return;
            }

            if (!validateEmail(email)) {
                alert("Please enter a valid email address.");
                return;
            }

            if (!validatePassword(password)) {
                alert("Password must be at least 6 characters long, contain an uppercase letter, and a number.");
                return;
            }

            try {
                await pe.setPerson({ firstName, email });
                await pe.track('registration');
                alert("Registration successful!");
            } catch (error) {
                console.error("Error during registration:", error);
                alert("An error occurred during registration. Please try again.");
            }
        }

        async function handleLogin() {
            const email = document.getElementById("login-email").value;
            const password = document.getElementById("login-password").value;

            if (!email || !password) {
                alert("Please enter both email and password.");
                return;
            }

            try {
                await pe.track('login');
                alert("Login successful!");
            } catch (error) {
                console.error("Error during login:", error);
                alert("Invalid credentials or network error.");
            }
        }
    </script>

    <div id="form-ff6216ad-d834-42f9-b348-934a66e59e69"></div>
    <script async src="https://forms.infobip.com/forms/ff6216ad-d834-42f9-b348-934a66e59e69.js"></script>
</body>
</html>
